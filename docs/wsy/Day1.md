# Day1日志



今天我和秦凡一起完成了总体的框架，我们依然是做五级流水。

首先，从代码规范上来谈：

- always语句有且只有一种用法：`always @(posedge clk)`
- 模块上信号的命名，大体上要遵从雷斯磊书上的命名，这样比较便于查阅
- 由于使用assign语句来代替了`always @ (*)`，所以译码阶段给不同控制信号的值，全都存储在ID文件夹下的`id_defines.vh`文件中



下面写的是我今天写的部分，以及其中需要注意的点：



## 全局

总体而言：

- datapath对数据通路（五级流水）进行了封装
- mips\_cpu对数据通路与存储器进行了封装，在后期会将其中的存储器替换为对外的`axi2sram`桥



## IF阶段

取指令阶段现在由两个部分组成：

- pc\_reg：在每个时钟上升沿，会将`pc_i`的值赋给`pc_o`，当然，如果是`rst`，就会将`pc_o`的值清零，需要注意的是：
  - 其中给`pc_o`赋值的部分是时序电路
  - 给`ce_o`也就是读使能赋值的部分是组合电路
- pc\_next\_sel：组合逻辑电路，目标是根据给出的条件，计算出下一个时钟周期pc的值是多少



## EX阶段

由于现在不涉及到数据来源的选择问题（前推问题），所以当前的EX阶段仅包含一个ALU，这里的ALU实质上就是一个组合电路，根据给定的信号进行计算



## MEM阶段

当前只实现了`ORI`指令，不需要访存，所以这部分没有任何的逻辑。